### 📄 F-08_Resiliencia_Hardening
```mermaid
sequenceDiagram
    participant CI as CI/CD Pipeline
    participant IS as Identity Service
    participant Redis as JWKS Cache
    participant CS as Compliance Service
    participant Chaos as Chaos Test Engine
    participant WORM as WORM Logs
    participant Alert as Alert Manager

    CI->>IS: Ejecuta test `jwks_interop_test`
    IS->>Redis: Verifica consistencia de `kid` y JWKS
    Redis-->>IS: Resultado de validación

    CI->>CS: Ejecuta test `compliance_fail_closed`
    Chaos->>CS: Simula caída del servicio
    CS->>CS: Activa modo degradado
    CS->>WORM: Registra evento de degradación
    CS->>Alert: Notifica estado degradado

    CI->>IS: Ejecuta test `dpop_replay_test`
    IS->>IS: Verifica bloqueo de replay con nonce
    IS->>Alert: Reporta métricas de seguridad

    Alert-->>Admin: Métricas y alertas visibles en dashboard
```
# Artefactos Técnicos — F-08: Resiliencia y Hardening Técnico

## 🧪 Pruebas de Caos y Seguridad
- `jwks_interop_test`: Verifica consistencia de claves rotativas
- `compliance_fail_closed`: Simula caída del Compliance Service
- `dpop_replay_test`: Verifica bloqueo de ataques de replay

## 📦 Métricas y Observabilidad
- `compliance_fail_closed_trigger_count`
- `kid_mismatch_detected_total`
- `dpop_replay_block_rate`
- `revocation_latency_p95`

## 📁 Registro Legal
- WORM + hash-chain para eventos de degradación
- Alertas distribuidas vía Alert Manager

## 🔐 Seguridad y Resiliencia
- Circuit Breaker (Vision Doc §6.1)
- Fail-closed ante caída de servicios críticos
- TTL en cache y fallback automático
- Validación de `kid` y JWKS rotativo

## ✅ Convenciones Aplicadas
- Chaos Engineering (SAD §11.2)
- Event-driven architecture
- Observabilidad por servicio
- Privacy by Design
